CREATE DATABASE FARMACIA;
GO;
USE FARMACIA;
GO;
CREATE TABLE Categorias 
    (
     Id INTEGER NOT NULL , 
     Categoria VARCHAR (50) NOT NULL 
    )
GO

ALTER TABLE Categorias ADD CONSTRAINT Categorias_PK PRIMARY KEY CLUSTERED (Id)
     WITH (
     ALLOW_PAGE_LOCKS = ON , 
     ALLOW_ROW_LOCKS = ON )
GO

CREATE TABLE Compras 
    (
     Id INTEGER NOT NULL , 
     FechaCompra DATETIME NOT NULL , 
     Cantidad INTEGER NOT NULL , 
     Total NUMERIC (2,10) NOT NULL , 
     Usuarios_Id INTEGER NOT NULL 
    )
GO

ALTER TABLE Compras ADD CONSTRAINT Compras_PK PRIMARY KEY CLUSTERED (Id)
     WITH (
     ALLOW_PAGE_LOCKS = ON , 
     ALLOW_ROW_LOCKS = ON )
GO

CREATE TABLE DetalleCompra 
    (
     Id INTEGER NOT NULL , 
     Productos_Id INTEGER NOT NULL , 
     Compras_Id INTEGER NOT NULL 
    )
GO

ALTER TABLE DetalleCompra ADD CONSTRAINT DetalleCompra_PK PRIMARY KEY CLUSTERED (Id)
     WITH (
     ALLOW_PAGE_LOCKS = ON , 
     ALLOW_ROW_LOCKS = ON )
GO

CREATE TABLE DetalleVenta 
    (
     Id INTEGER NOT NULL , 
     Productos_Id INTEGER NOT NULL , 
     Ventas_Id INTEGER NOT NULL 
    )
GO

ALTER TABLE DetalleVenta ADD CONSTRAINT DetalleVenta_PK PRIMARY KEY CLUSTERED (Id)
     WITH (
     ALLOW_PAGE_LOCKS = ON , 
     ALLOW_ROW_LOCKS = ON )
GO

CREATE TABLE Productos 
    (
     Id INTEGER NOT NULL , 
     NombreProducto VARCHAR (50) NOT NULL , 
     Precio NUMERIC (2,10) NOT NULL , 
     Cantidad INTEGER NOT NULL , 
     Estado SMALLINT NOT NULL , 
     Categorias_Id INTEGER NOT NULL , 
     Proveedores_Id INTEGER NOT NULL 
    )
GO

ALTER TABLE Productos ADD CONSTRAINT Productos_PK PRIMARY KEY CLUSTERED (Id)
     WITH (
     ALLOW_PAGE_LOCKS = ON , 
     ALLOW_ROW_LOCKS = ON )
GO

CREATE TABLE Proveedores 
    (
     Id INTEGER NOT NULL , 
     Proveedor VARCHAR (50) NOT NULL , 
     Telefono VARCHAR (50) NOT NULL , 
     Estado SMALLINT NOT NULL 
    )
GO

ALTER TABLE Proveedores ADD CONSTRAINT Proveedores_PK PRIMARY KEY CLUSTERED (Id)
     WITH (
     ALLOW_PAGE_LOCKS = ON , 
     ALLOW_ROW_LOCKS = ON )
GO

CREATE TABLE Roles 
    (
     Id INTEGER NOT NULL , 
     Rol VARCHAR (50) NOT NULL 
    )
GO

ALTER TABLE Roles ADD CONSTRAINT Roles_PK PRIMARY KEY CLUSTERED (Id)
     WITH (
     ALLOW_PAGE_LOCKS = ON , 
     ALLOW_ROW_LOCKS = ON )
GO

CREATE TABLE Usuarios 
    (
     Id INTEGER NOT NULL , 
     Correo VARCHAR (50) NOT NULL , 
     Password VARCHAR (50) NOT NULL , 
     Nombre VARCHAR (50) NOT NULL , 
     Apellido VARCHAR (50) NOT NULL , 
     Roles_Id INTEGER NOT NULL , 
     Estado SMALLINT NOT NULL 
    )
GO

ALTER TABLE Usuarios ADD CONSTRAINT Usuarios_PK PRIMARY KEY CLUSTERED (Id)
     WITH (
     ALLOW_PAGE_LOCKS = ON , 
     ALLOW_ROW_LOCKS = ON )
GO

CREATE TABLE Ventas 
    (
     Id INTEGER NOT NULL , 
     FechaVenta DATETIME NOT NULL , 
     Cantidad INTEGER NOT NULL , 
     PrecioUnitario NUMERIC (2,8) NOT NULL , 
     Total NUMERIC (2,8) NOT NULL , 
     Usuarios_Id INTEGER NOT NULL 
    )
GO

ALTER TABLE Ventas ADD CONSTRAINT Ventas_PK PRIMARY KEY CLUSTERED (Id)
     WITH (
     ALLOW_PAGE_LOCKS = ON , 
     ALLOW_ROW_LOCKS = ON )
GO

ALTER TABLE Compras 
    ADD CONSTRAINT Compras_Usuarios_FK FOREIGN KEY 
    ( 
     Usuarios_Id
    ) 
    REFERENCES Usuarios 
    ( 
     Id 
    ) 
    ON DELETE NO ACTION 
    ON UPDATE NO ACTION 
GO

ALTER TABLE DetalleCompra 
    ADD CONSTRAINT DetalleCompra_Compras_FK FOREIGN KEY 
    ( 
     Compras_Id
    ) 
    REFERENCES Compras 
    ( 
     Id 
    ) 
    ON DELETE NO ACTION 
    ON UPDATE NO ACTION 
GO

ALTER TABLE DetalleCompra 
    ADD CONSTRAINT DetalleCompra_Productos_FK FOREIGN KEY 
    ( 
     Productos_Id
    ) 
    REFERENCES Productos 
    ( 
     Id 
    ) 
    ON DELETE NO ACTION 
    ON UPDATE NO ACTION 
GO

ALTER TABLE DetalleVenta 
    ADD CONSTRAINT DetalleVenta_Productos_FK FOREIGN KEY 
    ( 
     Productos_Id
    ) 
    REFERENCES Productos 
    ( 
     Id 
    ) 
    ON DELETE NO ACTION 
    ON UPDATE NO ACTION 
GO

ALTER TABLE DetalleVenta 
    ADD CONSTRAINT DetalleVenta_Ventas_FK FOREIGN KEY 
    ( 
     Ventas_Id
    ) 
    REFERENCES Ventas 
    ( 
     Id 
    ) 
    ON DELETE NO ACTION 
    ON UPDATE NO ACTION 
GO

ALTER TABLE Productos 
    ADD CONSTRAINT Productos_Categorias_FK FOREIGN KEY 
    ( 
     Categorias_Id
    ) 
    REFERENCES Categorias 
    ( 
     Id 
    ) 
    ON DELETE NO ACTION 
    ON UPDATE NO ACTION 
GO

ALTER TABLE Productos 
    ADD CONSTRAINT Productos_Proveedores_FK FOREIGN KEY 
    ( 
     Proveedores_Id
    ) 
    REFERENCES Proveedores 
    ( 
     Id 
    ) 
    ON DELETE NO ACTION 
    ON UPDATE NO ACTION 
GO

ALTER TABLE Usuarios 
    ADD CONSTRAINT Usuarios_Roles_FK FOREIGN KEY 
    ( 
     Roles_Id
    ) 
    REFERENCES Roles 
    ( 
     Id 
    ) 
    ON DELETE NO ACTION 
    ON UPDATE NO ACTION 
GO

ALTER TABLE Ventas 
    ADD CONSTRAINT Ventas_Usuarios_FK FOREIGN KEY 
    ( 
     Usuarios_Id
    ) 
    REFERENCES Usuarios 
    ( 
     Id 
    ) 
    ON DELETE NO ACTION 
    ON UPDATE NO ACTION 
GO
